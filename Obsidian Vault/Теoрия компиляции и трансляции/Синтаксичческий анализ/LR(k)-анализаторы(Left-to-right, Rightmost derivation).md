Восходящий парсинг (bottom-up parsing) начинается с листьев (конкретных токенов) и постепенно строит дерево разбора до корня. Одним из наиболее известных алгоритмов восходящего парсинга является LR-парсер (Left-to-right, Rightmost derivation). LR-парсеры работают слева направо по входной строке и строят правосторонний вывод (rightmost derivation).

### Основные понятия

1. **Стековый автомат**: LR-парсер использует стек для хранения символов грамматики и состояний.
2. **Действия парсера**: Основные действия парсера — сдвиг (shift) и свертка (reduce).
   - **Сдвиг (Shift)**: Перенос следующего символа из входной строки в стек.
   - **Свертка (Reduce)**: Применение правила грамматики к символам в стеке, замена их на нетерминал.
3. **Таблица действий (Action Table)**: Таблица, которая определяет действия парсера в зависимости от текущего состояния и входного символа.
4. **Таблица переходов (Goto Table)**: Таблица, которая определяет следующее состояние парсера после свертки.

### Пример грамматики и построение LR(1) парсера

Рассмотрим пример грамматики для арифметических выражений:

```
E  -> E + T | T
T  -> T * F | F
F  -> ( E ) | id
```

#### Построение таблицы действий и таблицы переходов

Для построения таблицы действий и таблицы переходов необходимо выполнить следующие шаги:

1. **Построение множества состояний**: Используя алгоритм построения множества состояний (например, алгоритм Эрли или алгоритм построения множества LR(1) элементов).
2. **Заполнение таблицы действий**: Определение действий парсера (сдвиг, свертка, принятие) для каждого состояния и входного символа.
3. **Заполнение таблицы переходов**: Определение следующего состояния парсера после свертки.

### Пример построения таблицы действий и таблицы переходов

Для простоты, давайте рассмотрим упрощенный пример с грамматикой:

```
S -> E
E -> E + T | T
T -> id
```

#### Построение множества состояний

1. **Состояние 0**:
   - `S' -> .S`
   - `S -> .E`
   - `E -> .E + T`
   - `E -> .T`
   - `T -> .id`

2. **Состояние 1**:
   - `S' -> S.`

3. **Состояние 2**:
   - `S -> E.`
   - `E -> E. + T`

4. **Состояние 3**:
   - `E -> T.`

5. **Состояние 4**:
   - `T -> id.`

6. **Состояние 5**:
   - `E -> E + .T`
   - `T -> .id`

7. **Состояние 6**:
   - `E -> E + T.`

#### Заполнение таблицы действий

| Состояние | id  | +   | $   | S   | E   | T   |
|-----------|-----|-----|-----|-----|-----|-----|
| 0         | s4  |     |     |     | 2   | 3   |
| 1         |     |     | acc |     |     |     |
| 2         |     | s5  |     |     |     |     |
| 3         |     | r3  | r3  |     |     |     |
| 4         |     | r4  | r4  |     |     |     |
| 5         | s4  |     |     |     |     | 6   |
| 6         |     | r1  | r1  |     |     |     |

#### Заполнение таблицы переходов

| Состояние | S   | E   | T   |
|-----------|-----|-----|-----|
| 0         | 1   | 2   | 3   |
| 5         |     |     | 6   |

### Работа LR(1) парсера

Рассмотрим пример разбора строки `id + id`:

1. **Инициализация**:
   - Стек: `0`
   - Ввод: `id + id$`

2. **Основной цикл**:

   **Шаг 1**:
   - Стек: `0`
   - Ввод: `id + id$`
   - Действие: `s4` (сдвиг и переход в состояние 4)
     - Стек: `0 id 4`
     - Ввод: `+ id$`

   **Шаг 2**:
   - Стек: `0 id 4`
   - Ввод: `+ id$`
   - Действие: `r4` (свертка по правилу `T -> id`)
     - Стек: `0 T 3`
     - Ввод: `+ id$`

   **Шаг 3**:
   - Стек: `0 T 3`
   - Ввод: `+ id$`
   - Действие: `r3` (свертка по правилу `E -> T`)
     - Стек: `0 E 2`
     - Ввод: `+ id$`

   **Шаг 4**:
   - Стек: `0 E 2`
   - Ввод: `+ id$`
   - Действие: `s5` (сдвиг и переход в состояние 5)
     - Стек: `0 E 2 + 5`
     - Ввод: `id$`

   **Шаг 5**:
   - Стек: `0 E 2 + 5`
   - Ввод: `id$`
   - Действие: `s4` (сдвиг и переход в состояние 4)
     - Стек: `0 E 2 + 5 id 4`
     - Ввод: `$`

   **Шаг 6**:
   - Стек: `0 E 2 + 5 id 4`
   - Ввод: `$`
   - Действие: `r4` (свертка по правилу `T -> id`)
     - Стек: `0 E 2 + 5 T 6`
     - Ввод: `$`

   **Шаг 7**:
   - Стек: `0 E 2 + 5 T 6`
   - Ввод: `$`
   - Действие: `r1` (свертка по правилу `E -> E + T`)
     - Стек: `0 E 2`
     - Ввод: `$`

   **Шаг 8**:
   - Стек: `0 E 2`
   - Ввод: `$`
   - Действие: `acc` (принятие)
     - Разбор успешно завершен.




**Если вы хотите вычислить приближённое значение производной функции \( f(x) \) в точке \( x = a \)**, то **правая разностная производная (Forward Difference)** задаётся формулой:

$$
f'(a) \approx \frac{f(a + h) - f(a)}{h},
$$

где:
- \( h \) — малый шаг (обычно h много меньше чем 1),
- \( f(a + h) \) — значение функции в точке \( a + h \),
- \( f(a) \) — значение функции в точке \( a \).

**Напоминаем формулу производной:**
$$
f'(a) = \lim_{h \to 0} \frac{f(a + h) - f(a)}{h},
$$
---

### **1. Почему это работает?**
Это следует из **определения производной** как предела разностного отношения:
$$
f'(a) = \lim_{h \to 0} \frac{f(a + h) - f(a)}{h}.
$$

**Численная аппроксимация** заменяет предел на малый, но конечный шаг \( h \).

---

### **2. Точность и погрешность**
- **Погрешность метода:** \( O(h) \) (линейная зависимость от \( h \)).
- **Ошибка усечения:** Чем больше \( h \), тем хуже точность.
- **Ошибка округления:** При слишком малых \( h \) возникает потеря значащих цифр.

**Оптимальный выбор \( h \):**
$$
h \approx \sqrt{\epsilon} \cdot \max(1, |a|),
$$
где \( \epsilon \) — машинная точность (примерно \( 10^{-16} \) для `double`).

**Пример для \( a = 1 \):**
$$
h \approx \sqrt{10^{-16}} \cdot 1 = 10^{-8}.
$$

---

### **3. Пример вычисления**
**Функция:** \( f(x) = x^2 \)  
**Точка:** \( a = 2 \)  
**Точная производная:** \( f'(2) = 2x = 4* \).

**Численный расчёт при \( h = 0.01 \):**
$$
f'(2) \approx \frac{f(2 + 0.01) - f(2)}{0.01} = \frac{(2.01)^2 - 2^2}{0.01} = \frac{4.0401 - 4}{0.01} = 4.01.
$$
**Погрешность:** \( 0.01 \) (что соответствует \( O(h) \)).

---

### **4. Когда использовать?**
✅ **Плюсы:**
- Простота реализации.
- Быстрое вычисление.

❌ **Минусы:**
- Низкая точность.
- Не подходит для функций с резкими изменениями.

**Лучшие альтернативы:**
1. **Центральная разность** (\( O(h^2) \)):   
2. **5-точечная формула** (\( O(h^4) \)):

---

### **5. Код на Python**
```python
import numpy as np

def forward_diff(f, x, h=1e-5):
    """Вычисляет правую разностную производную."""
    return (f(x + h) - f(x)) / h

# Пример: производная sin(x) в x = 0 (должна быть cos(0) = 1)
x = 0.0
f = np.sin
df_approx = forward_diff(f, x)
df_exact = np.cos(x)

print(f"Приближённая производная: {df_approx}")
print(f"Точная производная: {df_exact}")
print(f"Ошибка: {abs(df_approx - df_exact)}")
```


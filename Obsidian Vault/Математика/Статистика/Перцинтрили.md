#### перцентрили можно понимать так: 
Пусть есть массив, элеметнтами которого являются время ушедшее на обработку запроса. Тогда 50 перцентриль его значение можно интерпритировать как -  **50% всех запросов имеют время выполнения меньше или равное значению 50-го перцентиля.**

**Формулировка**:  
**P50 (50-й перцентиль)** — это значение времени, такое что:  
**50% всех запросов выполняются ≤ P50**, а остальные 50% — строго дольше.

То есть, **P50 -  это значение, которое:**
1. **Больше или равно** 50% всех значений в массиве.
2. **Меньше или равно** оставшимся 50% значений.

**То есть не больше 50% всех значений в масстве меньше P50**

**Ключевые уточнения:**
1. Это **конкретное значение из данных** (или интерполированное), а не произвольное число.
2. Оно **разделяет данные ровно пополам**: 50% слева (≤ P50) и 50% справа (≥ P50).

### Замечание:
1. ***Точный перцентиль (по сырым данным)**
	- Значение P[N] **обязательно берётся из массива**.
	- Метод: данные сортируются, и перцентиль выбирается как конкретное значение из этого массива.
2. **Приближённый перцентиль (гистограммный метод)**
	- Значение P[N] **может не существовать в исходных данных**.
	- Метод: данные группируются в бакеты, и перцентиль вычисляется через интерполяцию внутри бакета.

Из этого определения следует что для рассчета перцентрилей необходимо иметь массив, причем в отсортированном виде, что в нектоторых системах накладно(высокопроизводительные системы). В таком случае можно использовать рассчет перцентрилей на основе гистограмм.

## **Алгоритмы на основе гистограмм (Histogram-based)**

**Как работает:**
- Данные разбиваются на "корзины" (buckets) по диапазонам значений.
- Подсчитывается, сколько значений попало в каждую корзину.
- Перцентиль вычисляется приближённо по распределению корзин.

**Плюсы:**  
✅ **Фиксированный объём памяти** (зависит от числа корзин).  
✅ **Быстрый расчёт** (O(1) для вставки, O(k) для перцентиля, где k — число корзин).

**Минусы:**  
❌ **Точность зависит от числа корзин** (чем их больше, тем точнее, но больше памяти).  
❌ **Плохо работает для редких выбросов** (если в корзине 0 значений, выбросы теряются).
-все правильно?